<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png" data-next-head=""/><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png" data-next-head=""/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png" data-next-head=""/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png" data-next-head=""/><link rel="icon" type="image/x-icon" href="/images/favicon.ico" data-next-head=""/><title data-next-head="">RSC Dependencies – Intermediate React v6</title><meta name="description" content="Learn how to set up a React Server Components project from scratch using Webpack and Babel, with guidance from Brian Holt&#x27;s Intermediate React v6 course on Frontend Masters. This comprehensive guide includes configuring Webpack, Babel, and Fastify to run RSCs efficiently without additional frameworks, enhancing your web development skills." data-next-head=""/><meta name="keywords" content="React Server Components,Webpack,Babel,Brian Holt,Frontend Masters,RSC,web development" data-next-head=""/><meta name="og:description" content="Learn how to set up a React Server Components project from scratch using Webpack and Babel, with guidance from Brian Holt&#x27;s Intermediate React v6 course on Frontend Masters. This comprehensive guide includes configuring Webpack, Babel, and Fastify to run RSCs efficiently without additional frameworks, enhancing your web development skills." data-next-head=""/><meta name="og:title" content="RSC Dependencies – Intermediate React v6" data-next-head=""/><meta name="og:image" content="/images/social-share-cover.jpg" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><link data-next-font="size-adjust" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/0732dfa8741dc542.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0732dfa8741dc542.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-b66ed8ba6f029a99.js" defer=""></script><script src="/_next/static/chunks/framework-a4ddb9b21624b39b.js" defer=""></script><script src="/_next/static/chunks/main-d4c20200ddabac7f.js" defer=""></script><script src="/_next/static/chunks/pages/_app-31cd0638bbee6098.js" defer=""></script><script src="/_next/static/chunks/pages/lessons/%5Bsection%5D/%5Bslug%5D-7da2347a1e0b6c73.js" defer=""></script><script src="/_next/static/81bftuYLGkwiC8AXLtnRs/_buildManifest.js" defer=""></script><script src="/_next/static/81bftuYLGkwiC8AXLtnRs/_ssgManifest.js" defer=""></script></head><body><script async="" defer="" src="https://a.holt.courses/latest.js"></script><div id="__next"><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/">Intermediate React v6</a></h1><div class="navbar-info"><a href="https://frontendmasters.com/courses/intermediate-react-v6/" class="cta-btn">Watch on Frontend Masters</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><p>There&#39;s a lot to getting this set up by hand, but bear with me, and I promise at the end of this you&#39;re going to understand RSCs at a depth that allows you to make trade-offs of when to use them and when to avoid them.</p>
<p>So, first, we&#39;re going to use Webpack and Babel directly (despite normally I&#39;d suggest Vite.) Why? Because this allows us to use the React team&#39;s code directly without a layer indirection between Vite and Webpack. In general I suggest Vite for React devs.</p>
<p>So let&#39;s get our project started. In a new directory run</p>
<pre><code class="hljs language-bash">npm init -y
npm install @babel/core@7.26.8 @babel/plugin-transform-modules-commonjs@7.26.3 @babel/preset-react@7.26.3 @babel/register@7.25.9 @fastify/static@8.1.0 babel-loader@9.2.1 css-loader@7.1.2 doodle.css@0.0.2 fastify@5.2.1 html-webpack-plugin@5.6.3 nodemon@3.1.9 pino-pretty@13.0.0 promised-sqlite3@2.1.0 react@19.0.0 react-dom@19.0.0 react-server-dom-webpack@19.0.0 sqlite3@5.1.7 style-loader@4.0.0 webpack@5.97.1 webpack-cli@6.0.1
</code></pre><p>You can either run that, or just copy this package.json into your project and run <code>npm i</code>.</p>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;no-framework&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0.0&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;main&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;index.js&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;keywords&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;author&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Brian Holt&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;license&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Apache-2.0&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;React Server Components without a framework!&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;dependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;@babel/core&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^7.26.8&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;@babel/plugin-transform-modules-commonjs&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^7.26.3&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;@babel/preset-react&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^7.26.3&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;@babel/register&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^7.25.9&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;@fastify/static&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^8.1.0&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;babel-loader&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^9.2.1&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;css-loader&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^7.1.2&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;doodle.css&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^0.0.2&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;fastify&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^5.2.1&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;html-webpack-plugin&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^5.6.3&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;nodemon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^3.1.9&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;pino-pretty&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^13.0.0&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;promised-sqlite3&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.1.0&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;react&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^19.0.0&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;react-dom&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^19.0.0&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;react-server-dom-webpack&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^19.0.0&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;sqlite3&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^5.1.7&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;style-loader&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^4.0.0&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;webpack&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^5.97.1&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;webpack-cli&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^6.0.1&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre><p>Either works! We need a lot of machinery to get this to work but the high level is we&#39;re going to be building a Fastify server that is going to be serving RSCs via the React Flight format.</p>
<p>Let&#39;s set up Webpack. Create a webpack.config.js</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;node:path&quot;</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">HtmlWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;html-webpack-plugin&quot;</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ReactServerWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;react-server-dom-webpack/plugin&quot;</span>);

<span class="hljs-keyword">const</span> mode = process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> || <span class="hljs-string">&quot;development&quot;</span>;
<span class="hljs-keyword">const</span> development = mode === <span class="hljs-string">&quot;development&quot;</span>;

<span class="hljs-keyword">const</span> config = {
  mode,
  <span class="hljs-attr">entry</span>: <span class="hljs-string">&quot;./src/Client.jsx&quot;</span>,
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.jsx?$/</span>,
        <span class="hljs-attr">use</span>: <span class="hljs-string">&quot;babel-loader&quot;</span>,
        <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
      },
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/i</span>,
        <span class="hljs-attr">use</span>: [<span class="hljs-string">&quot;style-loader&quot;</span>, <span class="hljs-string">&quot;css-loader&quot;</span>],
      },
    ],
  },
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-attr">extensions</span>: [<span class="hljs-string">&quot;.js&quot;</span>, <span class="hljs-string">&quot;.jsx&quot;</span>],
  },
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">HtmlWebpackPlugin</span>({
      <span class="hljs-attr">inject</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">publicPath</span>: <span class="hljs-string">&quot;/assets/&quot;</span>,
      <span class="hljs-attr">template</span>: <span class="hljs-string">&quot;./index.html&quot;</span>,
    }),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReactServerWebpackPlugin</span>({ <span class="hljs-attr">isServer</span>: <span class="hljs-literal">false</span> }),
  ],
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">chunkFilename</span>: development
      ? <span class="hljs-string">&quot;[id].chunk.js&quot;</span>
      : <span class="hljs-string">&quot;[id].[contenthash].chunk.js&quot;</span>,
    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&quot;dist&quot;</span>),
    <span class="hljs-attr">filename</span>: <span class="hljs-string">&quot;[name].js&quot;</span>,
    <span class="hljs-attr">clean</span>: <span class="hljs-literal">true</span>,
  },
  <span class="hljs-attr">optimization</span>: {
    <span class="hljs-attr">runtimeChunk</span>: <span class="hljs-string">&quot;single&quot;</span>,
  },
};

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = config;
</code></pre><p>This isn&#39;t a Webpack class so let&#39;s not dive too deep here - we&#39;re just making a Webpack config that&#39;s going to compile our React from JSX to usable JS code, use style-loader to load CSS, use the HTML plugin to generate a valid HTML for us, and make sure it&#39;s all living in one bundle so our React Flight protocol can find client side components in the bundle.</p>
<p>Let&#39;s set up the Babel config. Make a babel.config.js file.</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">const</span> development = (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> || <span class="hljs-string">&quot;development&quot;</span>) === <span class="hljs-string">&quot;development&quot;</span>;

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">presets</span>: [
    [
      <span class="hljs-string">&quot;@babel/preset-react&quot;</span>,
      {
        <span class="hljs-attr">runtime</span>: <span class="hljs-string">&quot;automatic&quot;</span>,
        <span class="hljs-attr">useSpread</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">development</span>: <span class="hljs-literal">true</span>,
      },
    ],
  ],
};
</code></pre><p>Now everything will work with Babel.</p>
<p>Let&#39;s make an index.html</p>
<pre><code class="hljs language-html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1&quot;</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>React Server Components without a Framework!<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/index.css&quot;</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;doodle&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><span class="hljs-comment">&lt;!--ROOT--&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre><p>Looks quite similar to our previous ones. Let&#39;s make a /public/index.css. <a href="https://raw.githubusercontent.com/btholt/irv6-project/refs/heads/main/completed/no-framework/public/index.css">Copy it from here</a></p>
<p>Copy <a href="https://github.com/btholt/irv6-project/blob/main/notes.db">this SQLite file</a> to your root directory as well.</p>
<blockquote>
<p>Both of these files should be in the root directory of the project if you cloned it. notes.db and index.css. Put them into your project</p>
</blockquote>
<p>Lastly add these scripts to your package.json</p>
<pre><code class="hljs language-json"><span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;dev:client&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;webpack --watch&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;dev:server&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;node --watch --conditions react-server server/main.js&quot;</span>
<span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
</code></pre><p>Okay, this should give us everything that&#39;s needed for our app to function before we actually write the server and the React app. One bit to highlight is <code>const ReactServerWebpackPlugin = require(&quot;react-server-dom-webpack/plugin&quot;);</code> in our Webpack file - this is the magic plugin that will allow Webpack to <em>not</em> render server components and only include client components. Other than that, this is a very standard React + Webpack set up.</p>
<p>Another new thing you might be the <code>--conditions react-server</code> part of running our server app. This lets Node.js know how to resolve its modules - we&#39;re in a react-server condition so only import those and know not to import client modules. I had never used this feature of Node.js before but it&#39;s pretty cool, even if it&#39;s a bit niche.</p>
</div><div class="lesson-links"><a href="/lessons/rscs-without-a-framework/intro-to-react-server-components" class="prev">← Previous</a><a href="/lessons/rscs-without-a-framework/server-and-client-components" class="next">Next →</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript><footer class="footer"><ul class="socials"><li class="social"><a href="https://twitter.com/holtbt"><svg fill="none" height="auto" width="32" xmlns="http://www.w3.org/2000/svg" viewBox="0.254 0.25 500 451.95400000000006"><path d="M394.033.25h76.67L303.202 191.693l197.052 260.511h-154.29L225.118 294.205 86.844 452.204H10.127l179.16-204.77L.254.25H158.46l109.234 144.417zm-26.908 406.063h42.483L135.377 43.73h-45.59z" fill="var(--footer-icons)"></path></svg></a></li><li class="social"><a href="https://bsky.app/profile/brianholt.me"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -3.268 64 68.414" width="38" height="auto"><path fill="var(--footer-icons)" d="M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022 0 8.51 0 6.55 0-3.268 8.579-.182 13.873 3.805zm36.254 0C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745z"></path></svg></a></li><li class="social"><a href="https://github.com/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--footer-icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--footer-icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Exercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"title":"RSC Dependencies","description":"Learn how to set up a React Server Components project from scratch using Webpack and Babel, with guidance from Brian Holt's Intermediate React v6 course on Frontend Masters. This comprehensive guide includes configuring Webpack, Babel, and Fastify to run RSCs efficiently without additional frameworks, enhancing your web development skills.","keywords":["React Server Components","Webpack","Babel","Brian Holt","Frontend Masters","RSC","web development"]},"html":"\u003cp\u003eThere\u0026#39;s a lot to getting this set up by hand, but bear with me, and I promise at the end of this you\u0026#39;re going to understand RSCs at a depth that allows you to make trade-offs of when to use them and when to avoid them.\u003c/p\u003e\n\u003cp\u003eSo, first, we\u0026#39;re going to use Webpack and Babel directly (despite normally I\u0026#39;d suggest Vite.) Why? Because this allows us to use the React team\u0026#39;s code directly without a layer indirection between Vite and Webpack. In general I suggest Vite for React devs.\u003c/p\u003e\n\u003cp\u003eSo let\u0026#39;s get our project started. In a new directory run\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003enpm init -y\nnpm install @babel/core@7.26.8 @babel/plugin-transform-modules-commonjs@7.26.3 @babel/preset-react@7.26.3 @babel/register@7.25.9 @fastify/static@8.1.0 babel-loader@9.2.1 css-loader@7.1.2 doodle.css@0.0.2 fastify@5.2.1 html-webpack-plugin@5.6.3 nodemon@3.1.9 pino-pretty@13.0.0 promised-sqlite3@2.1.0 react@19.0.0 react-dom@19.0.0 react-server-dom-webpack@19.0.0 sqlite3@5.1.7 style-loader@4.0.0 webpack@5.97.1 webpack-cli@6.0.1\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eYou can either run that, or just copy this package.json into your project and run \u003ccode\u003enpm i\u003c/code\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e\u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;name\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;no-framework\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;version\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;1.0.0\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;main\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;index.js\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;scripts\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;keywords\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;author\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;Brian Holt\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;license\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;Apache-2.0\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;description\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;React Server Components without a framework!\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;dependencies\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;@babel/core\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^7.26.8\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;@babel/plugin-transform-modules-commonjs\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^7.26.3\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;@babel/preset-react\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^7.26.3\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;@babel/register\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^7.25.9\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;@fastify/static\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^8.1.0\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;babel-loader\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^9.2.1\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;css-loader\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^7.1.2\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;doodle.css\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^0.0.2\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;fastify\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^5.2.1\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;html-webpack-plugin\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^5.6.3\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;nodemon\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^3.1.9\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;pino-pretty\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^13.0.0\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;promised-sqlite3\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^2.1.0\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;react\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^19.0.0\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;react-dom\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^19.0.0\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;react-server-dom-webpack\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^19.0.0\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;sqlite3\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^5.1.7\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;style-loader\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^4.0.0\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;webpack\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^5.97.1\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\u0026quot;webpack-cli\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;^6.0.1\u0026quot;\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eEither works! We need a lot of machinery to get this to work but the high level is we\u0026#39;re going to be building a Fastify server that is going to be serving RSCs via the React Flight format.\u003c/p\u003e\n\u003cp\u003eLet\u0026#39;s set up Webpack. Create a webpack.config.js\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e path = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;node:path\u0026quot;\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eHtmlWebpackPlugin\u003c/span\u003e = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;html-webpack-plugin\u0026quot;\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReactServerWebpackPlugin\u003c/span\u003e = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;react-server-dom-webpack/plugin\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e mode = process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eNODE_ENV\u003c/span\u003e || \u003cspan class=\"hljs-string\"\u003e\u0026quot;development\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e development = mode === \u003cspan class=\"hljs-string\"\u003e\u0026quot;development\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e config = {\n  mode,\n  \u003cspan class=\"hljs-attr\"\u003eentry\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;./src/Client.jsx\u0026quot;\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003emodule\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003erules\u003c/span\u003e: [\n      {\n        \u003cspan class=\"hljs-attr\"\u003etest\u003c/span\u003e: \u003cspan class=\"hljs-regexp\"\u003e/\\.jsx?$/\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003euse\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;babel-loader\u0026quot;\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003eexclude\u003c/span\u003e: \u003cspan class=\"hljs-regexp\"\u003e/node_modules/\u003c/span\u003e,\n      },\n      {\n        \u003cspan class=\"hljs-attr\"\u003etest\u003c/span\u003e: \u003cspan class=\"hljs-regexp\"\u003e/\\.css$/i\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003euse\u003c/span\u003e: [\u003cspan class=\"hljs-string\"\u003e\u0026quot;style-loader\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;css-loader\u0026quot;\u003c/span\u003e],\n      },\n    ],\n  },\n  \u003cspan class=\"hljs-attr\"\u003eresolve\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003eextensions\u003c/span\u003e: [\u003cspan class=\"hljs-string\"\u003e\u0026quot;.js\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\u0026quot;.jsx\u0026quot;\u003c/span\u003e],\n  },\n  \u003cspan class=\"hljs-attr\"\u003eplugins\u003c/span\u003e: [\n    \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eHtmlWebpackPlugin\u003c/span\u003e({\n      \u003cspan class=\"hljs-attr\"\u003einject\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003epublicPath\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;/assets/\u0026quot;\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003etemplate\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;./index.html\u0026quot;\u003c/span\u003e,\n    }),\n    \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReactServerWebpackPlugin\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eisServer\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e }),\n  ],\n  \u003cspan class=\"hljs-attr\"\u003eoutput\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003echunkFilename\u003c/span\u003e: development\n      ? \u003cspan class=\"hljs-string\"\u003e\u0026quot;[id].chunk.js\u0026quot;\u003c/span\u003e\n      : \u003cspan class=\"hljs-string\"\u003e\u0026quot;[id].[contenthash].chunk.js\u0026quot;\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e: path.\u003cspan class=\"hljs-title function_\"\u003eresolve\u003c/span\u003e(__dirname, \u003cspan class=\"hljs-string\"\u003e\u0026quot;dist\u0026quot;\u003c/span\u003e),\n    \u003cspan class=\"hljs-attr\"\u003efilename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;[name].js\u0026quot;\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003eclean\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n  },\n  \u003cspan class=\"hljs-attr\"\u003eoptimization\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003eruntimeChunk\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;single\u0026quot;\u003c/span\u003e,\n  },\n};\n\n\u003cspan class=\"hljs-variable language_\"\u003emodule\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexports\u003c/span\u003e = config;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eThis isn\u0026#39;t a Webpack class so let\u0026#39;s not dive too deep here - we\u0026#39;re just making a Webpack config that\u0026#39;s going to compile our React from JSX to usable JS code, use style-loader to load CSS, use the HTML plugin to generate a valid HTML for us, and make sure it\u0026#39;s all living in one bundle so our React Flight protocol can find client side components in the bundle.\u003c/p\u003e\n\u003cp\u003eLet\u0026#39;s set up the Babel config. Make a babel.config.js file.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e development = (process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eNODE_ENV\u003c/span\u003e || \u003cspan class=\"hljs-string\"\u003e\u0026quot;development\u0026quot;\u003c/span\u003e) === \u003cspan class=\"hljs-string\"\u003e\u0026quot;development\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-variable language_\"\u003emodule\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexports\u003c/span\u003e = {\n  \u003cspan class=\"hljs-attr\"\u003epresets\u003c/span\u003e: [\n    [\n      \u003cspan class=\"hljs-string\"\u003e\u0026quot;@babel/preset-react\u0026quot;\u003c/span\u003e,\n      {\n        \u003cspan class=\"hljs-attr\"\u003eruntime\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026quot;automatic\u0026quot;\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003euseSpread\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003edevelopment\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n      },\n    ],\n  ],\n};\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNow everything will work with Babel.\u003c/p\u003e\n\u003cp\u003eLet\u0026#39;s make an index.html\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-html\"\u003e\u003cspan class=\"hljs-meta\"\u003e\u0026lt;!DOCTYPE \u003cspan class=\"hljs-keyword\"\u003ehtml\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ehtml\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003elang\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;en\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ehead\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003emeta\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003echarset\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;utf-8\u0026quot;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003emeta\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;viewport\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003econtent\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;width=device-width, initial-scale=1\u0026quot;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003etitle\u003c/span\u003e\u0026gt;\u003c/span\u003eReact Server Components without a Framework!\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003etitle\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003elink\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003erel\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;stylesheet\u0026quot;\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ehref\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;/index.css\u0026quot;\u003c/span\u003e /\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ehead\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ebody\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;doodle\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;root\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"hljs-comment\"\u003e\u0026lt;!--ROOT--\u0026gt;\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ebody\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ehtml\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eLooks quite similar to our previous ones. Let\u0026#39;s make a /public/index.css. \u003ca href=\"https://raw.githubusercontent.com/btholt/irv6-project/refs/heads/main/completed/no-framework/public/index.css\"\u003eCopy it from here\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eCopy \u003ca href=\"https://github.com/btholt/irv6-project/blob/main/notes.db\"\u003ethis SQLite file\u003c/a\u003e to your root directory as well.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eBoth of these files should be in the root directory of the project if you cloned it. notes.db and index.css. Put them into your project\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eLastly add these scripts to your package.json\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e\u003cspan class=\"hljs-attr\"\u003e\u0026quot;scripts\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;dev:client\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;webpack --watch\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\u0026quot;dev:server\u0026quot;\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;node --watch --conditions react-server server/main.js\u0026quot;\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eOkay, this should give us everything that\u0026#39;s needed for our app to function before we actually write the server and the React app. One bit to highlight is \u003ccode\u003econst ReactServerWebpackPlugin = require(\u0026quot;react-server-dom-webpack/plugin\u0026quot;);\u003c/code\u003e in our Webpack file - this is the magic plugin that will allow Webpack to \u003cem\u003enot\u003c/em\u003e render server components and only include client components. Other than that, this is a very standard React + Webpack set up.\u003c/p\u003e\n\u003cp\u003eAnother new thing you might be the \u003ccode\u003e--conditions react-server\u003c/code\u003e part of running our server app. This lets Node.js know how to resolve its modules - we\u0026#39;re in a react-server condition so only import those and know not to import client modules. I had never used this feature of Node.js before but it\u0026#39;s pretty cool, even if it\u0026#39;s a bit niche.\u003c/p\u003e\n","markdown":"\nThere's a lot to getting this set up by hand, but bear with me, and I promise at the end of this you're going to understand RSCs at a depth that allows you to make trade-offs of when to use them and when to avoid them.\n\nSo, first, we're going to use Webpack and Babel directly (despite normally I'd suggest Vite.) Why? Because this allows us to use the React team's code directly without a layer indirection between Vite and Webpack. In general I suggest Vite for React devs.\n\nSo let's get our project started. In a new directory run\n\n```bash\nnpm init -y\nnpm install @babel/core@7.26.8 @babel/plugin-transform-modules-commonjs@7.26.3 @babel/preset-react@7.26.3 @babel/register@7.25.9 @fastify/static@8.1.0 babel-loader@9.2.1 css-loader@7.1.2 doodle.css@0.0.2 fastify@5.2.1 html-webpack-plugin@5.6.3 nodemon@3.1.9 pino-pretty@13.0.0 promised-sqlite3@2.1.0 react@19.0.0 react-dom@19.0.0 react-server-dom-webpack@19.0.0 sqlite3@5.1.7 style-loader@4.0.0 webpack@5.97.1 webpack-cli@6.0.1\n```\n\nYou can either run that, or just copy this package.json into your project and run `npm i`.\n\n```json\n{\n  \"name\": \"no-framework\",\n  \"version\": \"1.0.0\",\n  \"main\": \"index.js\",\n  \"scripts\": {},\n  \"keywords\": [],\n  \"author\": \"Brian Holt\",\n  \"license\": \"Apache-2.0\",\n  \"description\": \"React Server Components without a framework!\",\n  \"dependencies\": {\n    \"@babel/core\": \"^7.26.8\",\n    \"@babel/plugin-transform-modules-commonjs\": \"^7.26.3\",\n    \"@babel/preset-react\": \"^7.26.3\",\n    \"@babel/register\": \"^7.25.9\",\n    \"@fastify/static\": \"^8.1.0\",\n    \"babel-loader\": \"^9.2.1\",\n    \"css-loader\": \"^7.1.2\",\n    \"doodle.css\": \"^0.0.2\",\n    \"fastify\": \"^5.2.1\",\n    \"html-webpack-plugin\": \"^5.6.3\",\n    \"nodemon\": \"^3.1.9\",\n    \"pino-pretty\": \"^13.0.0\",\n    \"promised-sqlite3\": \"^2.1.0\",\n    \"react\": \"^19.0.0\",\n    \"react-dom\": \"^19.0.0\",\n    \"react-server-dom-webpack\": \"^19.0.0\",\n    \"sqlite3\": \"^5.1.7\",\n    \"style-loader\": \"^4.0.0\",\n    \"webpack\": \"^5.97.1\",\n    \"webpack-cli\": \"^6.0.1\"\n  }\n}\n```\n\nEither works! We need a lot of machinery to get this to work but the high level is we're going to be building a Fastify server that is going to be serving RSCs via the React Flight format.\n\nLet's set up Webpack. Create a webpack.config.js\n\n```javascript\nconst path = require(\"node:path\");\nconst HtmlWebpackPlugin = require(\"html-webpack-plugin\");\nconst ReactServerWebpackPlugin = require(\"react-server-dom-webpack/plugin\");\n\nconst mode = process.env.NODE_ENV || \"development\";\nconst development = mode === \"development\";\n\nconst config = {\n  mode,\n  entry: \"./src/Client.jsx\",\n  module: {\n    rules: [\n      {\n        test: /\\.jsx?$/,\n        use: \"babel-loader\",\n        exclude: /node_modules/,\n      },\n      {\n        test: /\\.css$/i,\n        use: [\"style-loader\", \"css-loader\"],\n      },\n    ],\n  },\n  resolve: {\n    extensions: [\".js\", \".jsx\"],\n  },\n  plugins: [\n    new HtmlWebpackPlugin({\n      inject: true,\n      publicPath: \"/assets/\",\n      template: \"./index.html\",\n    }),\n    new ReactServerWebpackPlugin({ isServer: false }),\n  ],\n  output: {\n    chunkFilename: development\n      ? \"[id].chunk.js\"\n      : \"[id].[contenthash].chunk.js\",\n    path: path.resolve(__dirname, \"dist\"),\n    filename: \"[name].js\",\n    clean: true,\n  },\n  optimization: {\n    runtimeChunk: \"single\",\n  },\n};\n\nmodule.exports = config;\n```\n\nThis isn't a Webpack class so let's not dive too deep here - we're just making a Webpack config that's going to compile our React from JSX to usable JS code, use style-loader to load CSS, use the HTML plugin to generate a valid HTML for us, and make sure it's all living in one bundle so our React Flight protocol can find client side components in the bundle.\n\nLet's set up the Babel config. Make a babel.config.js file.\n\n```javascript\nconst development = (process.env.NODE_ENV || \"development\") === \"development\";\n\nmodule.exports = {\n  presets: [\n    [\n      \"@babel/preset-react\",\n      {\n        runtime: \"automatic\",\n        useSpread: true,\n        development: true,\n      },\n    ],\n  ],\n};\n```\n\nNow everything will work with Babel.\n\nLet's make an index.html\n\n```html\n\u003c!DOCTYPE html\u003e\n\u003chtml lang=\"en\"\u003e\n  \u003chead\u003e\n    \u003cmeta charset=\"utf-8\" /\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1\" /\u003e\n    \u003ctitle\u003eReact Server Components without a Framework!\u003c/title\u003e\n    \u003clink rel=\"stylesheet\" href=\"/index.css\" /\u003e\n  \u003c/head\u003e\n  \u003cbody class=\"doodle\"\u003e\n    \u003cdiv id=\"root\"\u003e\u003c!--ROOT--\u003e\u003c/div\u003e\n  \u003c/body\u003e\n\u003c/html\u003e\n```\n\nLooks quite similar to our previous ones. Let's make a /public/index.css. [Copy it from here][css]\n\nCopy [this SQLite file][sqlite] to your root directory as well.\n\n\u003e Both of these files should be in the root directory of the project if you cloned it. notes.db and index.css. Put them into your project\n\nLastly add these scripts to your package.json\n\n```json\n\"scripts\": {\n  \"dev:client\": \"webpack --watch\",\n  \"dev:server\": \"node --watch --conditions react-server server/main.js\"\n},\n```\n\nOkay, this should give us everything that's needed for our app to function before we actually write the server and the React app. One bit to highlight is `const ReactServerWebpackPlugin = require(\"react-server-dom-webpack/plugin\");` in our Webpack file - this is the magic plugin that will allow Webpack to _not_ render server components and only include client components. Other than that, this is a very standard React + Webpack set up.\n\nAnother new thing you might be the `--conditions react-server` part of running our server app. This lets Node.js know how to resolve its modules - we're in a react-server condition so only import those and know not to import client modules. I had never used this feature of Node.js before but it's pretty cool, even if it's a bit niche.\n\n[css]: https://raw.githubusercontent.com/btholt/irv6-project/refs/heads/main/completed/no-framework/public/index.css\n[sqlite]: https://github.com/btholt/irv6-project/blob/main/notes.db\n","slug":"rsc-dependencies","title":"RSC Dependencies","section":"RSCs without a Framework","icon":"file-code","filePath":"/home/runner/work/intermediate-react-v6/intermediate-react-v6/lessons/03-rscs-without-a-framework/B-rsc-dependencies.md","nextSlug":"/lessons/rscs-without-a-framework/server-and-client-components","prevSlug":"/lessons/rscs-without-a-framework/intro-to-react-server-components"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"rscs-without-a-framework","slug":"rsc-dependencies"},"buildId":"81bftuYLGkwiC8AXLtnRs","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>