<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png" data-next-head=""/><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png" data-next-head=""/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png" data-next-head=""/><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png" data-next-head=""/><link rel="icon" type="image/x-icon" href="/images/favicon.ico" data-next-head=""/><title data-next-head="">useOptimistic Hook – Intermediate React v6</title><meta name="description" content="Discover how optimistic UI updates in messaging apps like iMessage or WhatsApp give users immediate visual feedback before a message is truly sent. Learn with Brian Holt in the Intermediate React v6 course for Frontend Masters, focusing on using React Server Components and hooks like useOptimistic and useTransition for seamless web development." data-next-head=""/><meta name="keywords" content="optimistic UI,React,useOptimistic,useTransition,Brian Holt,Frontend Masters,web development" data-next-head=""/><meta name="og:description" content="Discover how optimistic UI updates in messaging apps like iMessage or WhatsApp give users immediate visual feedback before a message is truly sent. Learn with Brian Holt in the Intermediate React v6 course for Frontend Masters, focusing on using React Server Components and hooks like useOptimistic and useTransition for seamless web development." data-next-head=""/><meta name="og:title" content="useOptimistic Hook – Intermediate React v6" data-next-head=""/><meta name="og:image" content="/images/social-share-cover.jpg" data-next-head=""/><meta name="twitter:card" content="summary_large_image" data-next-head=""/><link data-next-font="size-adjust" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/0732dfa8741dc542.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0732dfa8741dc542.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-b66ed8ba6f029a99.js" defer=""></script><script src="/_next/static/chunks/framework-a4ddb9b21624b39b.js" defer=""></script><script src="/_next/static/chunks/main-d4c20200ddabac7f.js" defer=""></script><script src="/_next/static/chunks/pages/_app-31cd0638bbee6098.js" defer=""></script><script src="/_next/static/chunks/pages/lessons/%5Bsection%5D/%5Bslug%5D-7da2347a1e0b6c73.js" defer=""></script><script src="/_next/static/81bftuYLGkwiC8AXLtnRs/_buildManifest.js" defer=""></script><script src="/_next/static/81bftuYLGkwiC8AXLtnRs/_ssgManifest.js" defer=""></script></head><body><script async="" defer="" src="https://a.holt.courses/latest.js"></script><div id="__next"><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/">Intermediate React v6</a></h1><div class="navbar-info"><a href="https://frontendmasters.com/courses/intermediate-react-v6/" class="cta-btn">Watch on Frontend Masters</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><p>Let&#39;s refactor to use transitions and <code>useOptimistic</code>.</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// at the top</span>
<span class="hljs-keyword">import</span> { useEffect, useOptimistic, useState, useTransition } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;

<span class="hljs-comment">// add new hooks to top of render function</span>
<span class="hljs-keyword">const</span> [isPending, startTransition] = <span class="hljs-title function_">useTransition</span>(); <span class="hljs-comment">// we don&#x27;t actually need isPending here today</span>
<span class="hljs-keyword">const</span> [optimisticThoughts, addOptimisticThought] = <span class="hljs-title function_">useOptimistic</span>(
  thoughts,
  <span class="hljs-function">(<span class="hljs-params">oldThoughts, newThought</span>) =&gt;</span> [newThought, ...oldThoughts]
);

<span class="hljs-comment">// inside postDeepThought</span>
<span class="hljs-title function_">startTransition</span>(<span class="hljs-title function_">async</span> () =&gt; {
  <span class="hljs-title function_">addOptimisticThought</span>(<span class="hljs-string">`<span class="hljs-subst">${thought}</span> (Loading…)`</span>);
  [...] <span class="hljs-comment">// rest of code</span>
});

<span class="hljs-comment">// change thoughts rendering to use optimisticThoughts</span>
{optimisticThoughts.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">thought, index</span>) =&gt;</span> (
  [...] <span class="hljs-comment">// code</span>
))}
</code></pre><ul>
<li>That&#39;s it! This will now do an optimistic view of the data</li>
<li>Immediately the user is shown their value plus &quot;Loading&quot; to let them know that their value is loading</li>
<li>Once it&#39;s done loading, it will replace state which will kick off a new re-render. This will cause the Loading... to stop showing</li>
<li>Because everything is wrapped in a transition, it&#39;s marked as a low priority re-render which means it&#39;s it easy for high priority re-renders to block this (which is what we want.)</li>
<li>Error? Great, it will automatically rollback the state to where it was stable without the the optimistic value in there. Easy!</li>
</ul>
<p>This is it for optimistic values! Very useful tool for any time you want temporary UI in front of the user. A lot of the edge cases are just handled for you!</p>
</div><div class="lesson-links"><a href="/lessons/optimistic-values/the-project" class="prev">← Previous</a><a href="/lessons/deferred-values/what-are-deferred-values" class="next">Next →</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><noscript><img src="https://a.holt.courses/noscript.gif" alt="" referrerPolicy="no-referrer-when-downgrade"/></noscript><footer class="footer"><ul class="socials"><li class="social"><a href="https://twitter.com/holtbt"><svg fill="none" height="auto" width="32" xmlns="http://www.w3.org/2000/svg" viewBox="0.254 0.25 500 451.95400000000006"><path d="M394.033.25h76.67L303.202 191.693l197.052 260.511h-154.29L225.118 294.205 86.844 452.204H10.127l179.16-204.77L.254.25H158.46l109.234 144.417zm-26.908 406.063h42.483L135.377 43.73h-45.59z" fill="var(--footer-icons)"></path></svg></a></li><li class="social"><a href="https://bsky.app/profile/brianholt.me"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -3.268 64 68.414" width="38" height="auto"><path fill="var(--footer-icons)" d="M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022 0 8.51 0 6.55 0-3.268 8.579-.182 13.873 3.805zm36.254 0C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745z"></path></svg></a></li><li class="social"><a href="https://github.com/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--footer-icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--footer-icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--footer-icons)"></path></g></g></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Exercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"title":"useOptimistic Hook","description":"Discover how optimistic UI updates in messaging apps like iMessage or WhatsApp give users immediate visual feedback before a message is truly sent. Learn with Brian Holt in the Intermediate React v6 course for Frontend Masters, focusing on using React Server Components and hooks like useOptimistic and useTransition for seamless web development.","keywords":["optimistic UI","React","useOptimistic","useTransition","Brian Holt","Frontend Masters","web development"]},"html":"\u003cp\u003eLet\u0026#39;s refactor to use transitions and \u003ccode\u003euseOptimistic\u003c/code\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// at the top\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useEffect, useOptimistic, useState, useTransition } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;react\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// add new hooks to top of render function\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [isPending, startTransition] = \u003cspan class=\"hljs-title function_\"\u003euseTransition\u003c/span\u003e(); \u003cspan class=\"hljs-comment\"\u003e// we don\u0026#x27;t actually need isPending here today\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [optimisticThoughts, addOptimisticThought] = \u003cspan class=\"hljs-title function_\"\u003euseOptimistic\u003c/span\u003e(\n  thoughts,\n  \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eoldThoughts, newThought\u003c/span\u003e) =\u0026gt;\u003c/span\u003e [newThought, ...oldThoughts]\n);\n\n\u003cspan class=\"hljs-comment\"\u003e// inside postDeepThought\u003c/span\u003e\n\u003cspan class=\"hljs-title function_\"\u003estartTransition\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003easync\u003c/span\u003e () =\u0026gt; {\n  \u003cspan class=\"hljs-title function_\"\u003eaddOptimisticThought\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${thought}\u003c/span\u003e (Loading…)`\u003c/span\u003e);\n  [...] \u003cspan class=\"hljs-comment\"\u003e// rest of code\u003c/span\u003e\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// change thoughts rendering to use optimisticThoughts\u003c/span\u003e\n{optimisticThoughts.\u003cspan class=\"hljs-title function_\"\u003emap\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ethought, index\u003c/span\u003e) =\u0026gt;\u003c/span\u003e (\n  [...] \u003cspan class=\"hljs-comment\"\u003e// code\u003c/span\u003e\n))}\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003eThat\u0026#39;s it! This will now do an optimistic view of the data\u003c/li\u003e\n\u003cli\u003eImmediately the user is shown their value plus \u0026quot;Loading\u0026quot; to let them know that their value is loading\u003c/li\u003e\n\u003cli\u003eOnce it\u0026#39;s done loading, it will replace state which will kick off a new re-render. This will cause the Loading... to stop showing\u003c/li\u003e\n\u003cli\u003eBecause everything is wrapped in a transition, it\u0026#39;s marked as a low priority re-render which means it\u0026#39;s it easy for high priority re-renders to block this (which is what we want.)\u003c/li\u003e\n\u003cli\u003eError? Great, it will automatically rollback the state to where it was stable without the the optimistic value in there. Easy!\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThis is it for optimistic values! Very useful tool for any time you want temporary UI in front of the user. A lot of the edge cases are just handled for you!\u003c/p\u003e\n","markdown":"\nLet's refactor to use transitions and `useOptimistic`.\n\n```javascript\n// at the top\nimport { useEffect, useOptimistic, useState, useTransition } from \"react\";\n\n// add new hooks to top of render function\nconst [isPending, startTransition] = useTransition(); // we don't actually need isPending here today\nconst [optimisticThoughts, addOptimisticThought] = useOptimistic(\n  thoughts,\n  (oldThoughts, newThought) =\u003e [newThought, ...oldThoughts]\n);\n\n// inside postDeepThought\nstartTransition(async () =\u003e {\n  addOptimisticThought(`${thought} (Loading…)`);\n  [...] // rest of code\n});\n\n// change thoughts rendering to use optimisticThoughts\n{optimisticThoughts.map((thought, index) =\u003e (\n  [...] // code\n))}\n```\n\n- That's it! This will now do an optimistic view of the data\n- Immediately the user is shown their value plus \"Loading\" to let them know that their value is loading\n- Once it's done loading, it will replace state which will kick off a new re-render. This will cause the Loading... to stop showing\n- Because everything is wrapped in a transition, it's marked as a low priority re-render which means it's it easy for high priority re-renders to block this (which is what we want.)\n- Error? Great, it will automatically rollback the state to where it was stable without the the optimistic value in there. Easy!\n\nThis is it for optimistic values! Very useful tool for any time you want temporary UI in front of the user. A lot of the edge cases are just handled for you!\n","slug":"useOptimistic-Hook","title":"useOptimistic Hook","section":"Optimistic Values","icon":"sun","filePath":"/home/runner/work/intermediate-react-v6/intermediate-react-v6/lessons/07-optimistic-values/C-useOptimistic-Hook.md","nextSlug":"/lessons/deferred-values/what-are-deferred-values","prevSlug":"/lessons/optimistic-values/the-project"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"optimistic-values","slug":"useOptimistic-Hook"},"buildId":"81bftuYLGkwiC8AXLtnRs","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>